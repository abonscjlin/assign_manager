# Dockerè‡ªå‹•æ‹‰å–åŠŸèƒ½èªªæ˜

## ğŸš€ åŠŸèƒ½æ¦‚è¿°

ç¾åœ¨Dockerå•Ÿå‹•è…³æœ¬å·²ç¶“æ”¯æ´è‡ªå‹•å¾GitHubæ‹‰å–æœ€æ–°ä»£ç¢¼ï¼Œç¢ºä¿æ¯æ¬¡å•Ÿå‹•çš„å®¹å™¨éƒ½ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ä»£ç¢¼ã€‚

## ğŸ“‹ å¯ç”¨å‘½ä»¤

### ä¸»è¦å•Ÿå‹•å‘½ä»¤

| å‘½ä»¤ | èªªæ˜ | ç”¨é€” | è€—æ™‚ |
|------|------|------|------|
| `start` | æ‹‰å–æœ€æ–°ä»£ç¢¼ã€å®Œå…¨é‡å»ºä¸¦å•Ÿå‹•æœå‹™ | **ç”Ÿç”¢éƒ¨ç½²æ¨è–¦** | ~35ç§’ |
| `start-fast` | å¿«é€Ÿå•Ÿå‹•æœå‹™ï¼ˆä½¿ç”¨Dockerç·©å­˜ï¼‰ | é–‹ç™¼æ¸¬è©¦ä½¿ç”¨ | ~22ç§’ |

### æ§‹å»ºå‘½ä»¤

| å‘½ä»¤ | èªªæ˜ | ç·©å­˜ç­–ç•¥ |
|------|------|----------|
| `build` | é‡æ–°æ§‹å»ºDockeræ˜ åƒ | ä¸ä½¿ç”¨ç·©å­˜ |
| `build-fast` | å¿«é€Ÿæ§‹å»ºDockeræ˜ åƒ | ä½¿ç”¨Dockerç·©å­˜ |

### å…¶ä»–å‘½ä»¤

| å‘½ä»¤ | èªªæ˜ |
|------|------|
| `stop` | åœæ­¢æœå‹™ |
| `restart` | é‡å•Ÿæœå‹™ |
| `status` | æŸ¥çœ‹æœå‹™ç‹€æ…‹ |
| `logs` | æŸ¥çœ‹æœå‹™æ—¥èªŒ |
| `update` | åƒ…æ›´æ–°ä»£ç¢¼ |
| `rebuild` | é‡æ–°æ§‹å»ºä¸¦é‡å•Ÿæœå‹™ |
| `cleanup` | æ¸…ç†Dockerè³‡æº |

## ğŸ”„ è‡ªå‹•æ‹‰å–æµç¨‹

### å®Œæ•´å•Ÿå‹•æµç¨‹ (`start`)

1. **æª¢æŸ¥ä¾è³´**ï¼šé©—è­‰Dockerå’ŒGitç’°å¢ƒ
2. **æº–å‚™ç›®éŒ„**ï¼šå‰µå»ºå¿…è¦çš„æœ¬æ©Ÿç›®éŒ„çµæ§‹
3. **è‡ªå‹•æ‹‰å–**ï¼š
   ```bash
   git fetch origin
   git reset --hard origin/main
   git clean -fd
   ```
4. **é¡¯ç¤ºæœ€æ–°æäº¤**ï¼šç¢ºèªæ‹‰å–åˆ°çš„ç‰ˆæœ¬
5. **å®Œå…¨é‡å»º**ï¼šä½¿ç”¨ `--no-cache` é‡æ–°æ§‹å»ºDockeræ˜ åƒ
6. **å•Ÿå‹•æœå‹™**ï¼šå•Ÿå‹•å®¹å™¨ä¸¦é€²è¡Œå¥åº·æª¢æŸ¥

### å¿«é€Ÿå•Ÿå‹•æµç¨‹ (`start-fast`)

1. **æª¢æŸ¥ä¾è³´**ï¼šé©—è­‰Dockerå’ŒGitç’°å¢ƒ
2. **æº–å‚™ç›®éŒ„**ï¼šå‰µå»ºå¿…è¦çš„æœ¬æ©Ÿç›®éŒ„çµæ§‹
3. **è‡ªå‹•æ‹‰å–**ï¼šåŒæ¨£æœƒæ‹‰å–æœ€æ–°ä»£ç¢¼
4. **å¿«é€Ÿæ§‹å»º**ï¼šä½¿ç”¨Dockerç·©å­˜åŠ é€Ÿæ§‹å»º
5. **å•Ÿå‹•æœå‹™**ï¼šå•Ÿå‹•å®¹å™¨ä¸¦é€²è¡Œå¥åº·æª¢æŸ¥

## ğŸ“Š æ€§èƒ½å°æ¯”

æ ¹æ“šå¯¦éš›æ¸¬è©¦çµæœï¼š

- **å®Œæ•´å•Ÿå‹•** (`start`)ï¼šç´„35ç§’
  - å„ªé»ï¼šç¢ºä¿æœ€æ–°ä»£ç¢¼ï¼Œå®Œå…¨é‡å»º
  - é©ç”¨ï¼šç”Ÿç”¢éƒ¨ç½²ã€é‡è¦æ›´æ–°

- **å¿«é€Ÿå•Ÿå‹•** (`start-fast`)ï¼šç´„22ç§’  
  - å„ªé»ï¼šé€Ÿåº¦å¿«ï¼Œä¾ç„¶æœƒæ‹‰å–æœ€æ–°ä»£ç¢¼
  - é©ç”¨ï¼šé–‹ç™¼æ¸¬è©¦ã€é »ç¹é‡å•Ÿ

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

### æœ¬åœ°è®Šæ›´ä¿è­·

è‡ªå‹•æ‹‰å–éç¨‹æœƒï¼š
- `git reset --hard origin/main`ï¼šé‡ç½®æ‰€æœ‰æœ¬åœ°è®Šæ›´
- `git clean -fd`ï¼šæ¸…ç†æœªè¿½è¹¤çš„æ–‡ä»¶
- ç¢ºä¿æœ¬åœ°ç‹€æ…‹èˆ‡GitHubå€‰åº«å®Œå…¨ä¸€è‡´

### éŒ¯èª¤è™•ç†

- è‡ªå‹•æª¢æ¸¬Gitå€‰åº«ç‹€æ…‹
- è™•ç†åˆä½µè¡çªå’Œåˆ†æ”¯å•é¡Œ
- é¡¯ç¤ºè©³ç´°çš„æ—¥èªŒä¿¡æ¯

## ğŸ’¡ ä½¿ç”¨å»ºè­°

### ğŸŒŸ æ¨è–¦ç”¨æ³•

1. **ç”Ÿç”¢éƒ¨ç½²**ï¼š
   ```bash
   ./docker/docker-start.sh start
   ```

2. **é–‹ç™¼æ¸¬è©¦**ï¼š
   ```bash
   ./docker/docker-start.sh start-fast
   ```

3. **æŸ¥çœ‹ç‹€æ…‹**ï¼š
   ```bash
   ./docker/docker-start.sh status
   ```

4. **æŸ¥çœ‹æ—¥èªŒ**ï¼š
   ```bash
   ./docker/docker-start.sh logs
   ```

### ğŸ”§ æ•…éšœæ’é™¤

å¦‚æœé‡åˆ°å•é¡Œï¼ŒæŒ‰é †åºå˜—è©¦ï¼š

1. **æª¢æŸ¥æ¬Šé™**ï¼š
   ```bash
   ./docker/docker-start.sh fix-perm
   ```

2. **å®Œå…¨é‡ç½®**ï¼š
   ```bash
   ./docker/docker-start.sh cleanup
   ./docker/docker-start.sh start
   ```

3. **æª¢æŸ¥Docker Compose**ï¼š
   ```bash
   ./docker/docker-start.sh check-comp
   ```

## ğŸ“‚ ç›®éŒ„çµæ§‹

```
/é …ç›®æ ¹ç›®éŒ„/
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ docker-start.sh          # ç®¡ç†è…³æœ¬
â”‚   â””â”€â”€ Dockerè‡ªå‹•æ‹‰å–åŠŸèƒ½èªªæ˜.md   # æœ¬æ–‡æª”
â””â”€â”€ assign_manager/              # è‡ªå‹•å‰µå»ºçš„æ›è¼‰ç›®éŒ„
    â”œâ”€â”€ result/                  # çµæœè¼¸å‡ºç›®éŒ„
    â”œâ”€â”€ requirements.txt         # Pythonä¾è³´
    â””â”€â”€ ...                      # GitHubä»£ç¢¼
```

## ğŸ” é©—è­‰æœ€æ–°ä»£ç¢¼

å•Ÿå‹•å¾Œå¯ä»¥é©—è­‰æ˜¯å¦ä½¿ç”¨äº†æœ€æ–°ä»£ç¢¼ï¼š

```bash
# æª¢æŸ¥å®¹å™¨å…§çš„Gitæäº¤
docker exec assign-manager-api bash -c "cd /app && git log --oneline -3"

# æª¢æŸ¥å®¹å™¨å…§çš„æ–‡ä»¶æ™‚é–“æˆ³
docker exec assign-manager-api ls -la /app/

# æª¢æŸ¥APIå¥åº·ç‹€æ…‹
curl http://localhost:7777/health
```

## ğŸ¯ æ ¸å¿ƒå„ªå‹¢

1. **è‡ªå‹•åŒ–**ï¼šæ¯æ¬¡å•Ÿå‹•éƒ½è‡ªå‹•ç²å–æœ€æ–°ä»£ç¢¼
2. **å¯é æ€§**ï¼šå¼·åˆ¶é‡ç½®ç¢ºä¿ä»£ç¢¼ä¸€è‡´æ€§
3. **éˆæ´»æ€§**ï¼šæä¾›å¿«é€Ÿå’Œå®Œæ•´å…©ç¨®å•Ÿå‹•æ¨¡å¼
4. **é€æ˜åº¦**ï¼šè©³ç´°çš„æ—¥èªŒè¼¸å‡ºå’Œç‹€æ…‹å ±å‘Š
5. **æ˜“ç”¨æ€§**ï¼šä¸€å€‹å‘½ä»¤å®Œæˆæ‰€æœ‰æ“ä½œ

## ğŸ“ æ›´æ–°æ—¥èªŒ

- **2025-06-16**ï¼šå¯¦ç¾è‡ªå‹•æ‹‰å–åŠŸèƒ½
- **2025-06-16**ï¼šæ·»åŠ requirements.txtæ”¯æ´
- **2025-06-16**ï¼šå„ªåŒ–Dockeræ§‹å»ºæµç¨‹
- **2025-06-16**ï¼šæ–°å¢å¿«é€Ÿå•Ÿå‹•æ¨¡å¼

---

ç¾åœ¨ä½ å¯ä»¥ç¢ºä¿¡æ¯æ¬¡ä½¿ç”¨ `./docker/docker-start.sh start` éƒ½æœƒç²å¾—æœ€æ–°çš„ä»£ç¢¼ï¼ğŸ‰ 